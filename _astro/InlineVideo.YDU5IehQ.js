import{i as n}from"./component-manager.modern.DSG18_2G.js";import{$ as o,t}from"./intersectionObserver.Bc8NuwfF.js";import"./index.3whys8t3.js";class i extends HTMLElement{static CONFIG={OBSERVER_OPTIONS:{shouldToggle:!0},DEPENDENCIES:["mux-video"]};dependenciesLoaded=Promise.all(i.CONFIG.DEPENDENCIES.map(e=>customElements.whenDefined(e)));$video=null;eventUnsubscribers={onIntersectionReady:null};connectedCallback(){this.initialize()}disconnectedCallback(){this.cleanup()}async initialize(){await this.dependenciesLoaded,requestAnimationFrame(()=>{this.setupVideoElement(),this.bindEvents()})}bindEvents(){this.eventUnsubscribers.onIntersectionReady=o.subscribe(this.handleIntersectionReady)}unbindEvents(){Object.values(this.eventUnsubscribers).forEach(e=>{e?.()})}handleIntersectionReady=e=>{e&&this.setupIntersectionObserver()};setupVideoElement(){if(this.$video=this.querySelector("mux-video")||this.querySelector("video"),!this.$video){console.warn("InlineVideo: No video element found");return}this.$video.autoplay=!1,this.$video.muted=!0,this.$video.loop=!0}setupIntersectionObserver(){this.$video&&t.observe(this,this.handleIntersection,i.CONFIG.OBSERVER_OPTIONS)}handleIntersection=(e,s)=>{s?this.playVideo():this.pauseVideo()};async playVideo(){if(this.$video)try{this.$video.paused&&await this.$video.play()}catch(e){console.warn("InlineVideo: Could not play video:",e)}}pauseVideo(){!this.$video||this.$video.paused||this.$video.pause()}cleanup(){t.unobserve(this),this.pauseVideo(),this.$video=null,this.unbindEvents()}}customElements.define("c-inline-video",n(i,"InlineVideo"));export{i as InlineVideo};
