import{i as C}from"./component-manager.modern.DSG18_2G.js";import{S as B}from"./Scroll.BfhDHv6w.js";import{m as _}from"./index.K5Rn1T6c.js";import{a as S,e as g}from"./index.3whys8t3.js";import"./deviceStatus.BebISHRr.js";import{$ as T}from"./scroll.thRy0ret.js";import{$ as r}from"./stores.Bcb6ZYZM.js";import{c as D}from"./focus-trap.esm.ClxjYaXz.js";import{w as b}from"./waapi.BXiWwULC.js";import{b as $}from"./targets.Ch0TkwgG.js";import{n as U,e as F}from"./parser.BX5Tv8gU.js";import{c as M}from"./timeline.0vhVXiXF.js";import"./timer.BnERl5BE.js";import"./animation.CYjtRj_b.js";import"./position.DOXOWIVY.js";const R=5,d=6,p=10;let V=(e,t,i,n)=>(e.events=e.events||{},e.events[i+p]||(e.events[i+p]=n(s=>{e.events[i].reduceRight((o,a)=>(a(o),o),{shared:{},...s})})),e.events[i]=e.events[i]||[],e.events[i].push(t),()=>{let s=e.events[i],o=s.indexOf(t);s.splice(o,1),s.length||(delete e.events[i],e.events[i+p](),delete e.events[i+p])}),q=1e3,I=(e,t)=>V(e,n=>{let s=t(n);s&&e.events[d].push(s)},R,n=>{let s=e.listen;e.listen=(...a)=>(!e.lc&&!e.active&&(e.active=!0,n()),s(...a));let o=e.off;return e.events[d]=[],e.off=()=>{o(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let a of e.events[d])a();e.events[d]=[]}},q)},()=>{e.listen=s,e.off=o}}),P=(e,t,i)=>{Array.isArray(e)||(e=[e]);let n,s,o=()=>{if(s===g)return;s=g;let u=e.map(l=>l.get());if(!n||u.some((l,v)=>l!==n[v])){n=u;let l=t(...u);l&&l.then&&l.t?l.then(v=>{n===u&&a.set(v)}):(a.set(l),s=g)}},a=S(void 0),m=a.get;a.get=()=>(o(),m());let O=o;return I(a,()=>{let u=e.map(l=>l.listen(O));return o(),()=>{for(let l of u)l()}}),a},N=(e,t)=>P(e,t);/**
 * Anime.js - easings - ESM
 * @version v4.2.2
 * @license MIT
 * @copyright 2025 - Julian Garnier
 */const k=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,W=(e,t,i)=>{let n=0,s=1,o,a,m=0;do a=n+(s-n)/2,o=k(a,t,i)-e,o>0?s=a:n=a;while($(o)>1e-7&&++m<100);return a},H=(e=.5,t=0,i=.5,n=1)=>e===t&&i===n?U:s=>s===0||s===1?s:k(W(s,e,i),t,n),E={"2xs":340,xs:500,sm:700,md:1e3,lg:1200,xl:1400,"2xl":1600,"3xl":1800,"4xl":2e3,"5xl":2400},A=["2xs","xs","sm","md","lg","xl","2xl","3xl","4xl","5xl"];function w(){const e=window.innerWidth;let t=null;for(const i of A)e>=E[i]&&(t=i);return t}const y=_({current:w(),list:E,keys:A});N(y,e=>e.current);const f=new Map;function x(){y.setKey("current",w())}function Q(){f.forEach(e=>{e.removeEventListener("change",x)}),f.clear();for(const e of A){const t=window.matchMedia(`(min-width: ${E[e]}px)`);f.set(e,t),t.addEventListener("change",x)}}function z(e){return f.get(e)?.matches??!1}function h(e){return!z(e)}Q();class Y{_callbacks=[];add(t){return this._callbacks.push(t),()=>this.remove(t)}remove(t){this._callbacks=this._callbacks.filter(i=>i!==t)}unlisten(){this._callbacks.forEach(t=>t()),this._callbacks=[]}}function L(e){return getComputedStyle(e).visibility!=="hidden"}function G(e,t=L){return new Promise(i=>{const n=setInterval(()=>{t(e)&&(i(),clearInterval(n))},5)})}async function J(e,{waitForVisibility:t=!0,checkVisibility:i=L}={}){return t?Promise.all(e.map(n=>G(n,i))).then(()=>{}):Promise.resolve()}class Z{instance;active=!1;container;constructor(t,i={}){this.container=t;const n=i.waitForVisibility??!0,s=i.checkVisibility??L;this.instance=D(t,{...i,checkCanFocusTrap:async o=>await J(o,{waitForVisibility:n,checkVisibility:s}),onActivate:()=>{this.active=!0,i?.onActivate?.()},onDeactivate:()=>{this.active=!1,i?.onDeactivate?.()}})}activate=()=>{this.active||this.instance.activate()};deactivate=()=>{this.active&&this.instance.deactivate()};toggle=t=>{if(t==null)this.active?this.deactivate():this.activate();else if(t===!0)this.activate();else if(t===!1)this.deactivate();else throw new Error("FocusTrapController.toggle: invalid boolean value; Received "+t)};destroy=()=>{this.deactivate(),this.instance=null}}class c extends HTMLElement{static DEFAULT_EASE=b.convertEase(H(1,.005,.292,1));static DEFAULT_DURATION=650;static ACTIVE_SCROLL_THRESHOLD=100;$button;$menu;$logoWrapper;$logo;$logoButton;$nav;isActive=S(!1);openTimeline=null;closeTimeline=null;_events=new Y;focusTrap;constructor(){super(),this.$menu=this.querySelector("[data-header-menu]"),this.$button=this.querySelector("[data-header-button] button"),this.$logoWrapper=this.querySelector("[data-header-logo-wrapper]"),this.$logo=this.querySelector("[data-header-logo]"),this.$logoButton=this.querySelector("[data-header-button-logo]"),this.$nav=this.querySelectorAll("[data-header-nav] a, [data-header-nav] button"),this.focusTrap=new Z(this,{escapeDeactivates:!0,clickOutsideDeactivates:!0,onActivate:()=>this.open(),onPostActivate:()=>{this.$button.setAttribute("aria-expanded","true"),this.$button.setAttribute("aria-label","Close navigation")},onDeactivate:()=>this.close(),onPostDeactivate:()=>{this.$button.setAttribute("aria-expanded","false"),this.$button.setAttribute("aria-label","Open navigation")}})}connectedCallback(){const t=h("md");this.updateMenuTabindex(t,r.get().isMenuOpen),this.bindEvents()}disconnectedCallback(){this.unbindEvents()}bindEvents(){this._events.add(r.listen(this.onMenuToggle)),this._events.add(T.subscribe(this.onScroll)),this._events.add(y.listen(this.onBreakpointChange)),this._events.add(this.isActive.subscribe(this.onActiveStateChange)),this.$logoButton.addEventListener("click",this.onLogoButtonClick)}unbindEvents(){this._events.unlisten(),this.$logoButton.removeEventListener("click",this.onLogoButtonClick)}onMenuToggle=({isMenuOpen:t})=>{const i=h("md");this.focusTrap.toggle(t),this.updateMenuTabindex(i,t)};onScroll=({scroll:t})=>{const i=h("md"),n=t>c.ACTIVE_SCROLL_THRESHOLD||i;this.isActive.set(n)};onBreakpointChange=()=>{const t=h("md"),i=r.get().isMenuOpen;if(this.updateMenuTabindex(t,i),t){this.isActive.set(!0);return}else T.get().scroll<c.ACTIVE_SCROLL_THRESHOLD&&this.isActive.set(!1);this.isActive.get()||r.set({isMenuOpen:!1})};onActiveStateChange=t=>{this.classList.toggle("-is-active",t);const i=h("md");r.get().isMenuOpen&&!t&&!i&&r.set({isMenuOpen:!1})};onLogoButtonClick=t=>{t.preventDefault(),t.stopPropagation();const i=T.get().scroll,n=Math.max(.75,i/4e3*.75);B.scrollTo(0,{easing:F.inOutQuint,duration:n}),history.replaceState(null,"",window.location.pathname)};getLogoTranslateY(){return parseFloat(getComputedStyle(this.$menu).getPropertyValue("--menu-content-offset"))||14}updateMenuTabindex(t,i=!1){t||i?this.$nav.forEach(n=>n.setAttribute("tabindex","0")):this.$nav.forEach(n=>n.setAttribute("tabindex","-1"))}open(t=!1){r.set({isMenuOpen:!0});const i=this.$menu.open(t),n=this.getLogoTranslateY();this.closeTimeline?.pause(),this.openTimeline?.cancel(),this.openTimeline=M({autoplay:!1}).sync(i,0).sync(this.$logo.showLogotype(),0).sync(b.animate(this.$logoWrapper,{y:`${n*.65}cqh`,duration:c.DEFAULT_DURATION,ease:c.DEFAULT_EASE}),0).play()}close(t=!1){r.set({isMenuOpen:!1});const i=this.$menu.close(t);this.openTimeline?.pause(),this.closeTimeline?.cancel(),this.closeTimeline=M({autoplay:!1}).sync(this.$logo.hideLogotype(t),0).sync(b.animate(this.$logoWrapper,{y:"0",duration:c.DEFAULT_DURATION,ease:c.DEFAULT_EASE}),0).sync(i,0).play()}}customElements.define("c-narrow-header",C(c,"NarrowHeader"));export{c as NarrowHeader};
