import{f as U,V as $,w as J,a4 as K,k as x,u as H,i as W,g as Q,A as X,B as Y}from"./targets.Ch0TkwgG.js";import{k as Z}from"./time.DWipCP5w.js";/**
 * Anime.js - text - ESM
 * @version v4.2.2
 * @license MIT
 * @copyright 2025 - Julian Garnier
 */const A=typeof Intl<"u"&&Intl.Segmenter,ee=/\{value\}/g,te=/\{i\}/g,se=/(\s+)/,ne=/^\s+$/,B="line",b="word",L="char",v="data-line";let M=null,k=null,F=null;const j=r=>r.isWordLike||r.segment===" "||Y(+r.segment),z=r=>r.setAttribute("aria-hidden","true"),N=(r,e)=>[...r.querySelectorAll(`[data-${e}]:not([data-${e}] [data-${e}])`)],ie={line:"#00D672",word:"#FF4B4B",char:"#5A87FF"},V=r=>{if(!r.childElementCount&&!r.textContent.trim()){const e=r.parentElement;r.remove(),e&&V(e)}},_=(r,e,t)=>{const h=r.getAttribute(v);(h!==null&&+h!==e||r.tagName==="BR")&&t.add(r);let o=r.childElementCount;for(;o--;)_(r.children[o],e,t);return t},O=(r,e={})=>{let t="";const h=X(e.class)?` class="${e.class}"`:"",o=x(e.clone,!1),f=x(e.wrap,!1),T=f?f===!0?"clip":f:o?"clip":!1;if(f&&(t+=`<span${T?` style="overflow:${T};"`:""}>`),t+=`<span${h}${o?' style="position:relative;"':""} data-${r}="{i}">`,o){const u=o==="left"?"-100%":o==="right"?"100%":"0",l=o==="top"?"-100%":o==="bottom"?"100%":"0";t+="<span>{value}</span>",t+=`<span inert style="position:absolute;top:${l};left:${u};white-space:nowrap;">{value}</span>`}else t+="{value}";return t+="</span>",f&&(t+="</span>"),t},R=(r,e,t,h,o,f,T,u,l)=>{const d=o===B,m=o===L,g=`_${o}_`,s=W(r)?r(t):r,a=d?"block":"inline-block";F.innerHTML=s.replace(ee,`<i class="${g}"></i>`).replace(te,`${m?l:d?T:u}`);const n=F.content,i=n.firstElementChild,c=n.querySelector(`[data-${o}]`)||i,p=n.querySelectorAll(`i.${g}`),w=p.length;if(w){i.style.display=a,c.style.display=a,c.setAttribute(v,`${T}`),d||(c.setAttribute("data-word",`${u}`),m&&c.setAttribute("data-char",`${l}`));let y=w;for(;y--;){const E=p[y],S=E.parentElement;S.style.display=a,d?S.innerHTML=t.innerHTML:S.replaceChild(t.cloneNode(!0),E)}e.push(c),h.appendChild(n)}else console.warn('The expression "{value}" is missing from the provided template.');return f&&(i.style.outline=`1px dotted ${ie[o]}`),i};class re{constructor(e,t={}){M||(M=A?new A([],{granularity:b}):{segment:n=>{const i=[],c=n.split(se);for(let p=0,w=c.length;p<w;p++){const y=c[p];i.push({segment:y,isWordLike:!ne.test(y)})}return i}}),k||(k=A?new A([],{granularity:"grapheme"}):{segment:n=>[...n].map(i=>({segment:i}))}),!F&&U&&(F=$.createElement("template"));const{words:h,chars:o,lines:f,accessible:T,includeSpaces:u,debug:l}=t,d=(e=J(e)?e[0]:e)&&e.nodeType?e:(K(e)||[])[0],m=f===!0?{}:f,g=h===!0||Q(h)?{}:h,s=o===!0?{}:o;this.debug=x(l,!1),this.includeSpaces=x(u,!1),this.accessible=x(T,!0),this.linesOnly=m&&!g&&!s,this.lineTemplate=H(m)?O(B,m):m,this.wordTemplate=H(g)||this.linesOnly?O(b,g):g,this.charTemplate=H(s)?O(L,s):s,this.$target=d,this.html=d&&d.innerHTML,this.lines=[],this.words=[],this.chars=[],this.effects=[],this.effectsCleanups=[],this.cache=null,this.ready=!1,this.width=0,this.resizeTimeout=null;const a=()=>this.html&&(m||g||s)&&this.split();this.resizeObserver=new ResizeObserver(()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{const n=d.offsetWidth;n!==this.width&&(this.width=n,a())},150)}),this.lineTemplate&&!this.ready?$.fonts.ready.then(a):a(),d?this.resizeObserver.observe(d):console.warn("No Text Splitter target found.")}addEffect(e){if(!W(e))return console.warn("Effect must return a function.");const t=Z(e);return this.effects.push(t),this.ready&&(this.effectsCleanups[this.effects.length-1]=t(this)),this}revert(){return clearTimeout(this.resizeTimeout),this.lines.length=this.words.length=this.chars.length=0,this.resizeObserver.disconnect(),this.effectsCleanups.forEach(e=>W(e)?e(this):e.revert&&e.revert()),this.$target.innerHTML=this.html,this}splitNode(e){const t=this.wordTemplate,h=this.charTemplate,o=this.includeSpaces,f=this.debug,T=e.nodeType;if(T===3){const u=e.nodeValue;if(u.trim()){const l=[],d=this.words,m=this.chars,g=M.segment(u),s=$.createDocumentFragment();let a=null;for(const n of g){const i=n.segment,c=j(n);if(!a||c&&a&&j(a))l.push(i);else{const p=l.length-1;!l[p].includes(" ")&&!i.includes(" ")?l[p]+=i:l.push(i)}a=n}for(let n=0,i=l.length;n<i;n++){const c=l[n];if(c.trim()){const p=l[n+1],w=o&&p&&!p.trim(),y=c,E=h?k.segment(y):null,S=h?$.createDocumentFragment():$.createTextNode(w?c+" ":c);if(h){const P=[...E];for(let C=0,q=P.length;C<q;C++){const D=P[C],G=C===q-1&&w?D.segment+" ":D.segment,I=$.createTextNode(G);R(h,m,I,S,L,f,-1,d.length,m.length)}}t?R(t,d,S,s,b,f,-1,d.length,m.length):h?s.appendChild(S):s.appendChild($.createTextNode(c)),w&&n++}else{if(n&&o)continue;s.appendChild($.createTextNode(c))}}e.parentNode.replaceChild(s,e)}}else if(T===1){const u=[...e.childNodes];for(let l=0,d=u.length;l<d;l++)this.splitNode(u[l])}}split(e=!1){const t=this.$target,h=!!this.cache&&!e,o=this.lineTemplate,f=this.wordTemplate,T=this.charTemplate,u=$.fonts.status!=="loading",l=o&&u;this.ready=!o||u,(l||e)&&this.effectsCleanups.forEach(s=>W(s)&&s(this)),h||(e&&(t.innerHTML=this.html,this.words.length=this.chars.length=0),this.splitNode(t),this.cache=t.innerHTML),l&&(h&&(t.innerHTML=this.cache),this.lines.length=0,f&&(this.words=N(t,b))),T&&(l||f)&&(this.chars=N(t,L));const d=this.words.length?this.words:this.chars;let m,g=0;for(let s=0,a=d.length;s<a;s++){const n=d[s],{top:i,height:c}=n.getBoundingClientRect();m&&i-m>c*.5&&g++,n.setAttribute(v,`${g}`);const p=n.querySelectorAll(`[${v}]`);let w=p.length;for(;w--;)p[w].setAttribute(v,`${g}`);m=i}if(l){const s=$.createDocumentFragment(),a=new Set,n=[];for(let i=0;i<g+1;i++){const c=t.cloneNode(!0);_(c,i,new Set).forEach(p=>{const w=p.parentElement;w&&a.add(w),p.remove()}),n.push(c)}a.forEach(V);for(let i=0,c=n.length;i<c;i++)R(o,this.lines,n[i],s,B,this.debug,i);t.innerHTML="",t.appendChild(s),f&&(this.words=N(t,b)),T&&(this.chars=N(t,L))}if(this.linesOnly){const s=this.words;let a=s.length;for(;a--;){const n=s[a];n.replaceWith(n.textContent)}s.length=0}if(this.accessible&&(l||!h)){const s=$.createElement("span");s.style.cssText="position:absolute;overflow:hidden;clip:rect(0 0 0 0);clip-path:inset(50%);width:1px;height:1px;white-space:nowrap;",s.innerHTML=this.html,t.insertBefore(s,t.firstChild),this.lines.forEach(z),this.words.forEach(z),this.chars.forEach(z)}return this.width=t.offsetWidth,(l||e)&&this.effects.forEach((s,a)=>this.effectsCleanups[a]=s(this)),this}refresh(){this.split(!0)}}const ae=(r,e)=>new re(r,e);export{re as T,ae as s};
