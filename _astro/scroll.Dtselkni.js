import{k as H,g as z,B as I,n as x,c as ct,S as R,V as w,d as V,A,u as J,r as dt,p as rt,W as pt,i as ft,X as ut,Y as N,l as K,Z as O,L as gt,M as Q,F as mt,_ as tt}from"./targets.Ch0TkwgG.js";import{c as bt}from"./animation.CYjtRj_b.js";import{T as M}from"./timer.BnERl5BE.js";import{g as et,s as st}from"./target.z-VVwDyG.js";import{s as xt}from"./time.DWipCP5w.js";import{a as wt,n as it}from"./parser.BX5Tv8gU.js";/**
 * Anime.js - events - ESM
 * @version v4.2.2
 * @license MIT
 * @copyright 2025 - Julian Garnier
 */const yt=()=>{const a=w.createElement("div");w.body.appendChild(a),a.style.height="100lvh";const t=a.offsetHeight;return w.body.removeChild(a),t},D=(a,t)=>a&&ft(a)?a(t):a,q=new Map;class vt{constructor(t){this.element=t,this.useWin=this.element===w.body,this.winWidth=0,this.winHeight=0,this.width=0,this.height=0,this.left=0,this.top=0,this.scale=1,this.zIndex=0,this.scrollX=0,this.scrollY=0,this.prevScrollX=0,this.prevScrollY=0,this.scrollWidth=0,this.scrollHeight=0,this.velocity=0,this.backwardX=!1,this.backwardY=!1,this.scrollTicker=new M({autoplay:!1,onBegin:()=>this.dataTimer.resume(),onUpdate:()=>{const e=this.backwardX||this.backwardY;R(this,s=>s.handleScroll(),e)},onComplete:()=>this.dataTimer.pause()}).init(),this.dataTimer=new M({autoplay:!1,frameRate:30,onUpdate:e=>{const s=e.deltaTime,n=this.prevScrollX,o=this.prevScrollY,d=this.scrollX,l=this.scrollY,i=n-d,h=o-l;this.prevScrollX=d,this.prevScrollY=l,i&&(this.backwardX=n>d),h&&(this.backwardY=o>l),this.velocity=V(s>0?Math.sqrt(i*i+h*h)/s:0,5)}}).init(),this.resizeTicker=new M({autoplay:!1,duration:250*K.timeScale,onComplete:()=>{this.updateWindowBounds(),this.refreshScrollObservers(),this.handleScroll()}}).init(),this.wakeTicker=new M({autoplay:!1,duration:500*K.timeScale,onBegin:()=>{this.scrollTicker.resume()},onComplete:()=>{this.scrollTicker.pause()}}).init(),this._head=null,this._tail=null,this.updateScrollCoords(),this.updateWindowBounds(),this.updateBounds(),this.refreshScrollObservers(),this.handleScroll(),this.resizeObserver=new ResizeObserver(()=>this.resizeTicker.restart()),this.resizeObserver.observe(this.element),(this.useWin?O:this.element).addEventListener("scroll",this,!1)}updateScrollCoords(){const t=this.useWin,e=this.element;this.scrollX=V(t?O.scrollX:e.scrollLeft,0),this.scrollY=V(t?O.scrollY:e.scrollTop,0)}updateWindowBounds(){this.winWidth=O.innerWidth,this.winHeight=yt()}updateBounds(){const t=getComputedStyle(this.element),e=this.element;this.scrollWidth=e.scrollWidth+parseFloat(t.marginLeft)+parseFloat(t.marginRight),this.scrollHeight=e.scrollHeight+parseFloat(t.marginTop)+parseFloat(t.marginBottom),this.updateWindowBounds();let s,n;if(this.useWin)s=this.winWidth,n=this.winHeight;else{const o=e.getBoundingClientRect();s=e.clientWidth,n=e.clientHeight,this.top=o.top,this.left=o.left,this.scale=o.width?s/o.width:o.height?n/o.height:1}this.width=s,this.height=n}refreshScrollObservers(){R(this,t=>{t._debug&&t.removeDebug()}),this.updateBounds(),R(this,t=>{t.refresh(),t._debug&&t.debug()})}refresh(){this.updateWindowBounds(),this.updateBounds(),this.refreshScrollObservers(),this.handleScroll()}handleScroll(){this.updateScrollCoords(),this.wakeTicker.restart()}handleEvent(t){switch(t.type){case"scroll":this.handleScroll();break}}revert(){this.scrollTicker.cancel(),this.dataTimer.cancel(),this.resizeTicker.cancel(),this.wakeTicker.cancel(),this.resizeObserver.disconnect(),(this.useWin?O:this.element).removeEventListener("scroll",this),q.delete(this.element)}}const St=a=>{const t=a?rt(a)[0]||w.body:w.body;let e=q.get(t);return e||(e=new vt(t),q.set(t,e)),e},_=(a,t,e,s,n)=>{const o=t==="min",d=t==="max",l=t==="top"||t==="left"||t==="start"||o?0:t==="bottom"||t==="right"||t==="end"||d?"100%":t==="center"?"50%":t,{n:i,u:h}=gt(l,Q);let p=i;return h==="%"?p=i/100*e:h&&(p=bt(a,Q,"px",!0).n),d&&s<0&&(p+=s),o&&n>0&&(p+=n),p},P=(a,t,e,s,n)=>{let o;if(A(t)){const d=ut.exec(t);if(d){const l=d[0],i=l[0],h=t.split(l),p=h[0]==="min",f=h[0]==="max",m=_(a,h[0],e,s,n),S=_(a,h[1],e,s,n);if(p){const b=N(_(a,"min",e),S,i);o=b<m?m:b}else if(f){const b=N(_(a,"max",e),S,i);o=b>m?m:b}else o=N(m,S,i)}else o=_(a,t,e,s,n)}else o=t;return V(o,0)},nt=a=>{let t;const e=a.targets;for(let s=0,n=e.length;s<n;s++){const o=e[s];if(o[pt]){t=o;break}}return t};let $t=0;const ot=["#FF4B4B","#FF971B","#FFC730","#F9F640","#7AFF5A","#18FF74","#17E09B","#3CFFEC","#05DBE9","#33B3F1","#638CF9","#C563FE","#FF4FCF","#F93F8A"];class kt{constructor(t={}){const e=H(t.sync,"play pause"),s=e?wt(e):null,n=e&&(e==="linear"||e===it),o=e&&!(s===it&&!n),d=e&&(I(e)||e===!0||n),l=e&&A(e)&&!o&&!d,i=l?e.split(" ").map(p=>()=>{const f=this.linked;return f&&f[p]?f[p]():null}):null,h=l&&i.length>2;this.index=$t++,this.id=z(t.id)?this.index:t.id,this.container=St(t.container),this.target=null,this.linked=null,this.repeat=null,this.horizontal=null,this.enter=null,this.leave=null,this.sync=o||d||!!i,this.syncEase=o?s:null,this.syncSmooth=d?e===!0||n?1:e:null,this.onSyncEnter=i&&!h&&i[0]?i[0]:x,this.onSyncLeave=i&&!h&&i[1]?i[1]:x,this.onSyncEnterForward=i&&h&&i[0]?i[0]:x,this.onSyncLeaveForward=i&&h&&i[1]?i[1]:x,this.onSyncEnterBackward=i&&h&&i[2]?i[2]:x,this.onSyncLeaveBackward=i&&h&&i[3]?i[3]:x,this.onEnter=t.onEnter||x,this.onLeave=t.onLeave||x,this.onEnterForward=t.onEnterForward||x,this.onLeaveForward=t.onLeaveForward||x,this.onEnterBackward=t.onEnterBackward||x,this.onLeaveBackward=t.onLeaveBackward||x,this.onUpdate=t.onUpdate||x,this.onSyncComplete=t.onSyncComplete||x,this.reverted=!1,this.ready=!1,this.completed=!1,this.began=!1,this.isInView=!1,this.forceEnter=!1,this.hasEntered=!1,this.offset=0,this.offsetStart=0,this.offsetEnd=0,this.distance=0,this.prevProgress=0,this.thresholds=["start","end","end","start"],this.coords=[0,0,0,0],this.debugStyles=null,this.$debug=null,this._params=t,this._debug=H(t.debug,!1),this._next=null,this._prev=null,ct(this.container,this),xt(()=>{if(!this.reverted){if(!this.target){const p=rt(t.target)[0];this.target=p||w.body,this.refresh()}this._debug&&this.debug()}})}link(t){if(t&&(t.pause(),this.linked=t,z(t)||(t.persist=!0),!this._params.target)){let e;z(t.targets)?R(t,s=>{s.targets&&!e&&(e=nt(s))}):e=nt(t),this.target=e||w.body,this.refresh()}return this}get velocity(){return this.container.velocity}get backward(){return this.horizontal?this.container.backwardX:this.container.backwardY}get scroll(){return this.horizontal?this.container.scrollX:this.container.scrollY}get progress(){const t=(this.scroll-this.offsetStart)/this.distance;return t===1/0||isNaN(t)?0:V(mt(t,0,1),6)}refresh(){this.ready=!0,this.reverted=!1;const t=this._params;return this.repeat=H(D(t.repeat,this),!0),this.horizontal=H(D(t.axis,this),"y")==="x",this.enter=H(D(t.enter,this),"end start"),this.leave=H(D(t.leave,this),"start end"),this.updateBounds(),this.handleScroll(),this}removeDebug(){return this.$debug&&(this.$debug.parentNode.removeChild(this.$debug),this.$debug=null),this.debugStyles&&(this.debugStyles.revert(),this.$debug=null),this}debug(){this.removeDebug();const t=this.container,e=this.horizontal,s=t.element.querySelector(":scope > .animejs-onscroll-debug"),n=w.createElement("div"),o=w.createElement("div"),d=w.createElement("div"),l=ot[this.index%ot.length],i=t.useWin,h=i?t.winWidth:t.width,p=i?t.winHeight:t.height,f=t.scrollWidth,m=t.scrollHeight,S=this.container.width>360?320:260,b=e?0:10,y=e?10:0,u=e?24:S/2,c=e?u:15,g=e?60:u,F=e?g:c,$=e?"repeat-x":"repeat-y",T=k=>e?"0px "+k+"px":k+"px 2px",C=k=>`linear-gradient(${e?90:0}deg, ${k} 2px, transparent 1px)`,L=(k,B,v,W,r)=>`position:${k};left:${B}px;top:${v}px;width:${W}px;height:${r}px;`;n.style.cssText=`${L("absolute",b,y,e?f:S,e?S:m)}
      pointer-events: none;
      z-index: ${this.container.zIndex++};
      display: flex;
      flex-direction: ${e?"column":"row"};
      filter: drop-shadow(0px 1px 0px rgba(0,0,0,.75));
    `,o.style.cssText=`${L("sticky",0,0,e?h:u,e?u:p)}`,s||(o.style.cssText+=`background:
        ${C("#FFFF")}${T(u-10)} / 100px 100px ${$},
        ${C("#FFF8")}${T(u-10)} / 10px 10px ${$};
      `),d.style.cssText=`${L("relative",0,0,e?f:u,e?u:m)}`,s||(d.style.cssText+=`background:
        ${C("#FFFF")}${T(0)} / ${e?"100px 10px":"10px 100px"} ${$},
        ${C("#FFF8")}${T(0)} / ${e?"10px 0px":"0px 10px"} ${$};
      `);const X=[" enter: "," leave: "];this.coords.forEach((k,B)=>{const v=B>1,W=(v?0:this.offset)+k,r=B%2,G=W<F,Z=W>(v?e?h:p:e?f:m)-F,E=(v?r&&!G:!r&&!G)||Z,Y=w.createElement("div"),j=w.createElement("div"),lt=e?E?"right":"left":E?"bottom":"top",ht=E?(e?g:c)+(v?e?-1:Z?0:-2:e?-1:-2):e?1:0;j.innerHTML=`${this.id}${X[r]}${this.thresholds[B]}`,Y.style.cssText=`${L("absolute",0,0,g,c)}
        display: flex;
        flex-direction: ${e?"column":"row"};
        justify-content: flex-${v?"start":"end"};
        align-items: flex-${E?"end":"start"};
        border-${lt}: 2px solid ${l};
      `,j.style.cssText=`
        overflow: hidden;
        max-width: ${S/2-10}px;
        height: ${c};
        margin-${e?E?"right":"left":E?"bottom":"top"}: -2px;
        padding: 1px;
        font-family: ui-monospace, monospace;
        font-size: 10px;
        letter-spacing: -.025em;
        line-height: 9px;
        font-weight: 600;
        text-align: ${e&&E||!e&&!v?"right":"left"};
        white-space: pre;
        text-overflow: ellipsis;
        color: ${r?l:"rgba(0,0,0,.75)"};
        background-color: ${r?"rgba(0,0,0,.65)":l};
        border: 2px solid ${r?l:"transparent"};
        border-${e?E?"top-left":"top-right":E?"top-left":"bottom-left"}-radius: 5px;
        border-${e?E?"bottom-left":"bottom-right":E?"top-right":"bottom-right"}-radius: 5px;
      `,Y.appendChild(j);let at=W-ht+(e?1:0);Y.style[e?"left":"top"]=`${at}px`,(v?o:d).appendChild(Y)}),n.appendChild(o),n.appendChild(d),t.element.appendChild(n),s||n.classList.add("animejs-onscroll-debug"),this.$debug=n,et(t.element,"position")==="static"&&(this.debugStyles=st(t.element,{position:"relative "}))}updateBounds(){this._debug&&this.removeDebug();let t;const e=this.target,s=this.container,n=this.horizontal,o=this.linked;let d,l=e;for(o&&(d=o.currentTime,o.seek(0,!0)),l.parentElement;l&&l!==s.element&&l!==w.body;){const r=et(l,"position")==="sticky"?st(l,{position:"static"}):!1;l=l.parentElement,r&&(t||(t=[]),t.push(r))}const i=e.getBoundingClientRect(),h=s.scale,p=(n?i.left+s.scrollX-s.left:i.top+s.scrollY-s.top)*h,f=(n?i.width:i.height)*h,m=n?s.width:s.height,b=(n?s.scrollWidth:s.scrollHeight)-m,y=this.enter,u=this.leave;let c="start",g="end",F="end",$="start";if(A(y)){const r=y.split(" ");F=r[0],c=r.length>1?r[1]:c}else if(J(y)){const r=y;z(r.container)||(F=r.container),z(r.target)||(c=r.target)}else I(y)&&(F=y);if(A(u)){const r=u.split(" ");$=r[0],g=r.length>1?r[1]:g}else if(J(u)){const r=u;z(r.container)||($=r.container),z(r.target)||(g=r.target)}else I(u)&&($=u);const T=P(e,c,f),C=P(e,g,f),L=T+p-m,X=C+p-b,U=P(e,F,m,L,X),k=P(e,$,m,L,X),B=T+p-U,v=C+p-k,W=v-B;this.offset=p,this.offsetStart=B,this.offsetEnd=v,this.distance=W<=0?0:W,this.thresholds=[c,g,F,$],this.coords=[T,C,U,k],t&&t.forEach(r=>r.revert()),o&&o.seek(d,!0),this._debug&&this.debug()}handleScroll(){if(!this.ready)return;const t=this.linked,e=this.sync,s=this.syncEase,n=this.syncSmooth,o=t&&(s||n),d=this.horizontal,l=this.container,i=this.scroll,h=i<=this.offsetStart,p=i>=this.offsetEnd,f=!h&&!p,m=i===this.offsetStart||i===this.offsetEnd,S=!this.hasEntered&&m,b=this._debug&&this.$debug;let y=!1,u=!1,c=this.progress;if(h&&this.began&&(this.began=!1),c>0&&!this.began&&(this.began=!0),o){const g=t.progress;if(n&&I(n)){if(n<1){const $=g<c&&c===1?1e-4:g>c&&!c?-1e-4:0;c=V(tt(g,c,tt(.01,.2,n))+$,6)}}else s&&(c=s(c));y=c!==this.prevProgress,u=g===1,y&&!u&&n&&g&&l.wakeTicker.restart()}if(b){const g=d?l.scrollY:l.scrollX;b.style[d?"top":"left"]=g+10+"px"}(f&&!this.isInView||S&&!this.forceEnter&&!this.hasEntered)&&(f&&(this.isInView=!0),!this.forceEnter||!this.hasEntered?(b&&f&&(b.style.zIndex=`${this.container.zIndex++}`),this.onSyncEnter(this),this.onEnter(this),this.backward?(this.onSyncEnterBackward(this),this.onEnterBackward(this)):(this.onSyncEnterForward(this),this.onEnterForward(this)),this.hasEntered=!0,S&&(this.forceEnter=!0)):f&&(this.forceEnter=!1)),(f||!f&&this.isInView)&&(y=!0),y&&(o&&t.seek(t.duration*c),this.onUpdate(this)),!f&&this.isInView&&(this.isInView=!1,this.onSyncLeave(this),this.onLeave(this),this.backward?(this.onSyncLeaveBackward(this),this.onLeaveBackward(this)):(this.onSyncLeaveForward(this),this.onLeaveForward(this)),e&&!n&&(u=!0)),c>=1&&this.began&&!this.completed&&(e&&u||!e)&&(e&&this.onSyncComplete(this),this.completed=!0,(!this.repeat&&!t||!this.repeat&&t&&t.completed)&&this.revert()),c<1&&this.completed&&(this.completed=!1),this.prevProgress=c}revert(){if(this.reverted)return;const t=this.container;return dt(t,this),t._head||t.revert(),this._debug&&this.removeDebug(),this.reverted=!0,this.ready=!1,this}}const Lt=(a={})=>new kt(a);export{Lt as o};
