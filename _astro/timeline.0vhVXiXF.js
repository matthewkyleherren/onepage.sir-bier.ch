import{Q as v,l as A,k as R,u as S,i as E,p as O,g as o,H as p,O as y,A as j,R as k,S as m,B as I,c as L,T as P,U}from"./targets.Ch0TkwgG.js";import{T as _,r as x,c as F,t as J}from"./timer.BnERl5BE.js";import{J as V}from"./animation.CYjtRj_b.js";import{a as w}from"./parser.BX5Tv8gU.js";import{p as c}from"./position.DOXOWIVY.js";/**
 * Anime.js - timeline - ESM
 * @version v4.2.2
 * @license MIT
 * @copyright 2025 - Julian Garnier
 */function z(e){return P((e.iterationDuration+e._loopDelay)*e.iterationCount-e._loopDelay)||p}function T(e,t,i,s,r,n){const a=I(e.duration)&&e.duration<=p?i-p:i;J(t,a,1,1,U.AUTO);const u=s?new V(s,e,t,a,!1,r,n):new _(e,t,a);return u.init(!0),L(t,u),m(t,h=>{const l=h._offset+h._delay+h.duration;l>t.iterationDuration&&(t.iterationDuration=l)}),t.duration=z(t),t}class B extends _{constructor(t={}){super(t,null,0),this.duration=0,this.labels={};const i=t.defaults,s=A.defaults;this.defaults=i?v(i,s):s,this.onRender=t.onRender||s.onRender;const r=R(t.playbackEase,s.playbackEase);this._ease=r?w(r):null,this.iterationDuration=0}add(t,i,s){const r=S(i),n=S(t);if(r||n){if(this._hasChildren=!0,r){const d=i;if(E(s)){const a=s,u=O(t),h=this.duration,g=this.iterationDuration,l=d.id;let f=0;const D=u.length;u.forEach(b=>{const C={...d};this.duration=h,this.iterationDuration=g,o(l)||(C.id=l+"-"+f),T(C,this,c(this,a(b,f,D,this)),b,f,D),f++})}else T(d,this,c(this,s),t)}else T(t,this,c(this,i));return this.init(!0)}}sync(t,i){if(o(t)||t&&o(t.pause))return this;t.pause();const s=+(t.effect?t.effect.getTiming().duration:t.duration);return this.add(t,{currentTime:[0,s],duration:s,ease:"linear"},i)}set(t,i,s){return o(i)?this:(i.duration=p,i.composition=y.replace,this.add(t,i,s))}call(t,i){return o(t)||t&&!E(t)?this:this.add({duration:0,onComplete:()=>t(this)},i)}label(t,i){return o(t)||t&&!j(t)?this:(this.labels[t]=c(this,i),this)}remove(t,i){return x(O(t),this,i),this}stretch(t){const i=this.duration;if(i===k(t))return this;const s=t/i,r=this.labels;m(this,n=>n.stretch(n.duration*s));for(let n in r)r[n]*=s;return super.stretch(t)}refresh(){return m(this,t=>{t.refresh&&t.refresh()}),this}revert(){return super.revert(),m(this,t=>t.revert,!0),F(this)}then(t){return super.then(t)}}const K=e=>new B(e).init();export{K as c};
